{"ast":null,"code":"import { createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\nimport { Transition } from 'vue';\nimport { acceleratedEasing, deceleratedEasing, defineComponent, nullifyTransforms } from \"../../util/index.mjs\";\nexport const VDialogTransition = defineComponent({\n  name: 'VDialogTransition',\n  props: {\n    target: Object\n  },\n\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const functions = {\n      onBeforeEnter(el) {\n        el.style.pointerEvents = 'none';\n      },\n\n      async onEnter(el, done) {\n        await new Promise(resolve => requestAnimationFrame(resolve));\n        const {\n          x,\n          y\n        } = getDimensions(props.target, el);\n        const animation = el.animate([{\n          transform: `translate(${x}px, ${y}px) scale(0.1)`,\n          opacity: 0\n        }, {\n          transform: ''\n        }], {\n          duration: 225,\n          easing: deceleratedEasing\n        });\n        animation.finished.then(() => done());\n      },\n\n      onAfterEnter(el) {\n        el.style.removeProperty('pointer-events');\n      },\n\n      onBeforeLeave(el) {\n        el.style.pointerEvents = 'none';\n      },\n\n      async onLeave(el, done) {\n        await new Promise(resolve => requestAnimationFrame(resolve));\n        const {\n          x,\n          y\n        } = getDimensions(props.target, el);\n        const animation = el.animate([{\n          transform: ''\n        }, {\n          transform: `translate(${x}px, ${y}px) scale(0.1)`,\n          opacity: 0\n        }], {\n          duration: 125,\n          easing: acceleratedEasing\n        });\n        animation.finished.then(() => done());\n      },\n\n      onAfterLeave(el) {\n        el.style.removeProperty('pointer-events');\n      }\n\n    };\n    return () => {\n      return props.target ? _createVNode(Transition, _mergeProps({\n        \"name\": \"dialog-transition\"\n      }, functions, {\n        \"css\": false\n      }), slots) : _createVNode(Transition, {\n        \"name\": \"dialog-transition\"\n      }, slots);\n    };\n  }\n\n});\n\nfunction getDimensions(target, el) {\n  const targetBox = target.getBoundingClientRect();\n  const elBox = nullifyTransforms(el);\n  const [originX, originY] = getComputedStyle(el).transformOrigin.split(' ').map(v => parseFloat(v));\n  const [anchorSide, anchorOffset] = getComputedStyle(el).getPropertyValue('--v-overlay-anchor-origin').split(' ');\n  let offsetX = targetBox.left + targetBox.width / 2;\n\n  if (anchorSide === 'left' || anchorOffset === 'left') {\n    offsetX -= targetBox.width / 2;\n  } else if (anchorSide === 'right' || anchorOffset === 'right') {\n    offsetX += targetBox.width / 2;\n  }\n\n  let offsetY = targetBox.top + targetBox.height / 2;\n\n  if (anchorSide === 'top' || anchorOffset === 'top') {\n    offsetY -= targetBox.height / 2;\n  } else if (anchorSide === 'bottom' || anchorOffset === 'bottom') {\n    offsetY += targetBox.height / 2;\n  }\n\n  return {\n    x: offsetX - (originX + elBox.left),\n    y: offsetY - (originY + elBox.top)\n  };\n}","map":{"version":3,"mappings":"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","names":["Transition","acceleratedEasing","deceleratedEasing","defineComponent","nullifyTransforms","VDialogTransition","name","props","target","Object","setup","slots","_ref","functions","onBeforeEnter","el","style","pointerEvents","onEnter","done","Promise","resolve","requestAnimationFrame","x","y","getDimensions","animation","animate","transform","opacity","duration","easing","finished","then","onAfterEnter","removeProperty","onBeforeLeave","onLeave","onAfterLeave","targetBox","getBoundingClientRect","elBox","originX","originY","getComputedStyle","transformOrigin","split","map","v","parseFloat","anchorSide","anchorOffset","getPropertyValue","offsetX","left","width","offsetY","top","height"],"sources":["../../../src/components/transitions/dialog-transition.tsx"],"sourcesContent":["import type { PropType } from 'vue'\nimport { Transition } from 'vue'\nimport { acceleratedEasing, deceleratedEasing, defineComponent, nullifyTransforms } from '@/util'\n\nexport const VDialogTransition = defineComponent({\n  name: 'VDialogTransition',\n\n  props: {\n    target: Object as PropType<HTMLElement>,\n  },\n\n  setup (props, { slots }) {\n    const functions = {\n      onBeforeEnter (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n      },\n      async onEnter (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n\n        const { x, y } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: `translate(${x}px, ${y}px) scale(0.1)`, opacity: 0 },\n          { transform: '' },\n        ], {\n          duration: 225,\n          easing: deceleratedEasing,\n        })\n        animation.finished.then(() => done())\n      },\n      onAfterEnter (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n      onBeforeLeave (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n      },\n      async onLeave (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n\n        const { x, y } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: '' },\n          { transform: `translate(${x}px, ${y}px) scale(0.1)`, opacity: 0 },\n        ], {\n          duration: 125,\n          easing: acceleratedEasing,\n        })\n        animation.finished.then(() => done())\n      },\n      onAfterLeave (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n    }\n\n    return () => {\n      return props.target\n        ? (\n          <Transition\n            name=\"dialog-transition\"\n            { ...functions }\n            css={ false }\n            v-slots={ slots }\n          />\n        )\n        : <Transition name=\"dialog-transition\" v-slots={ slots } />\n    }\n  },\n})\n\nfunction getDimensions (target: HTMLElement, el: HTMLElement) {\n  const targetBox = target.getBoundingClientRect()\n  const elBox = nullifyTransforms(el)\n  const [originX, originY] = getComputedStyle(el).transformOrigin.split(' ').map(v => parseFloat(v))\n\n  const [anchorSide, anchorOffset] = getComputedStyle(el).getPropertyValue('--v-overlay-anchor-origin').split(' ')\n\n  let offsetX = targetBox.left + targetBox.width / 2\n  if (anchorSide === 'left' || anchorOffset === 'left') {\n    offsetX -= targetBox.width / 2\n  } else if (anchorSide === 'right' || anchorOffset === 'right') {\n    offsetX += targetBox.width / 2\n  }\n\n  let offsetY = targetBox.top + targetBox.height / 2\n  if (anchorSide === 'top' || anchorOffset === 'top') {\n    offsetY -= targetBox.height / 2\n  } else if (anchorSide === 'bottom' || anchorOffset === 'bottom') {\n    offsetY += targetBox.height / 2\n  }\n\n  return {\n    x: offsetX - (originX + elBox.left),\n    y: offsetY - (originY + elBox.top),\n  }\n}\n"]},"metadata":{},"sourceType":"module"}